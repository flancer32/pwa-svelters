<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WB5KTHQ7"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->

<header class="bg-white shadow-md py-4 px-6 flex justify-between items-center fixed top-0 w-full z-50">
    <!-- Logo -->
    <a href="/" class="flex items-center space-x-2 text-2xl font-semibold text-gray-800">
        <i data-lucide="apple"></i>
        <span>NutriLog</span>
    </a>

    <!-- Desktop Navigation -->
    <!-- nav class="hidden md:flex space-x-6">
        <a href="/" class="text-gray-600 hover:text-gray-900">Главная</a>
        <a href="/app/use-cases.html" class="text-gray-600 hover:text-gray-900">Применение</a>
        <a href="/app/pricing.html" class="text-gray-600 hover:text-gray-900">Цены</a>
        <a href="/app/videos.html" class="text-gray-600 hover:text-gray-900">Видео</a>
    </nav -->

    <!-- Authentication Buttons -->
    <div class="hidden md:flex space-x-4">
        {{^isAuthenticated}}
        <a href="/app/login" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md">Войти</a>
        <a href="/app/register" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md">Регистрация</a>
        {{/isAuthenticated}}

        {{#isAuthenticated}}
        <div class="relative">
            <button id="user-menu-button" class="p-2 text-gray-600 hover:bg-gray-100 rounded-md">
                <i data-lucide="user"></i>
            </button>

            <!-- Dropdown Menu -->
            <div id="user-menu" class="hidden absolute right-0 mt-2 w-40 bg-white shadow-lg rounded-md py-2">
                <a href="https://chatgpt.com/g/g-FaoraVhde-nutrilog" target="_blank"
                   class="nl-gpt-chat-link block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    ИИ Ассистент
                </a>
                <a href="/app/dashboard" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Профиль</a>
                <a href="/fl64-web-session/logout" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Выход</a>
            </div>
        </div>
        {{/isAuthenticated}}
    </div>

    <!-- Mobile Menu Button -->
    <button id="menu-button" class="md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-md">
        <i data-lucide="menu"></i>
    </button>
</header>

<!-- Mobile Menu -->
<div id="mobile-menu" class="hidden md:hidden fixed top-16 left-0 w-full bg-white shadow-lg py-4 px-6">
    <!--
    <a href="/" class="block text-gray-700 py-2">Главная</a>
    <a href="/app/use-cases.html" class="block text-gray-700 py-2">Применение</a>
    <a href="/app/pricing.html" class="block text-gray-700 py-2">Цены</a>
    <a href="/app/videos.html" class="block text-gray-700 py-2">Видео</a>
    -->

    {{^isAuthenticated}}
    <a href="/app/login"
       class="block bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-md text-center mt-4">Войти</a>
    <a href="/app/register"
       class="block bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-center mt-2">Регистрация</a>
    {{/isAuthenticated}}

    {{#isAuthenticated}}
    <div class="border-t border-gray-200 mt-4 pt-4">
        <a href="https://chatgpt.com/g/g-FaoraVhde-nutrilog" target="_blank"
           class="nl-gpt-chat-link block text-gray-700 py-2">
            ИИ Ассистент
        </a>
        <a href="/app/dashboard" class="block text-gray-700 py-2">Профиль</a>
        <a href="/fl64-web-session/logout" class="block text-gray-700 py-2">Выход</a>
    </div>
    {{/isAuthenticated}}
</div>

<script>
    // Toggle mobile menu
    const menuButton = document.getElementById('menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    menuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Toggle user dropdown menu
    const userMenuButton = document.getElementById('user-menu-button');
    const userMenu = document.getElementById('user-menu');
    if (userMenuButton) {
        userMenuButton.addEventListener('click', () => {
            userMenu.classList.toggle('hidden');
        });

        // Close menu when clicking outside
        document.addEventListener('click', (event) => {
            if (!userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
                userMenu.classList.add('hidden');
            }
        });
    }
</script>
