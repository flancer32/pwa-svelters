# Public Key authentication

## Sign Up

### Регистрация пользователя

Пользователь любым способом регистрируется на бэке (например, регистрирует свой email, на который потом получает ссылку
для завершения регистрации). Пользователю назначается `userName`, уникальный в пределах приложения.

### Получение запроса на генерацию ключа

Для генерации публичного ключа в мобильном телефоне пользователя нужно запросить запрос на генерацию (`challengeUp`) и
данные пользователя (email и идентификатор) с бэкенда. В запросе указывается `userName` пользователя для которого
происходит аутентификация.

### Генерация пары ключей в мобильном

Устройство пользователя генерирует ассиметричный ключ для соответствующего домена и
запроса (`relyParty` & `challengeUp`) и отправляет публичный ключ вместе с дополнительными данными на бэкенд. Бэкенд
сохраняет публичный ключ на своей стороне, привязывая его к имени пользователя и
аттестату (`userName` & `attestationId`).

### Получение запроса на аутентификацию

Фронт отправляет на бэк запрос на получение данных для аутентификации (`challenge`, `attestationId`). В качестве
параметра запроса указывается имя пользователя (`userName`).


### Аутентификация и проверка подписи